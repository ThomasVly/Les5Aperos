<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ scenario.name }} - Les5Aperos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/activity.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dialog.css') }}">
</head>
<body class="activity-page">
    
    <!-- Background GIF -->
    <div class="background-gif-container">
        <div class="tenor-gif-embed" data-postid="22552632" data-share-method="host" data-aspect-ratio="1.77778" data-width="100%">
            <a href="https://tenor.com/view/sunset-retro-retro-synthwave-gif-22552632">Sunset Retro Retro GIF</a>
            from <a href="https://tenor.com/search/sunset+retro-gifs">Sunset Retro GIFs</a>
        </div>
    </div>
    <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
    
    <!-- Overlay -->
    <div class="overlay"></div>
    
    <!-- Ordinateur en mode jeu -->
    <section class="computer-section">
        <div class="computer-wrapper game-mode">
            <img src="{{ url_for('static', filename='src/Computer_pixel_art.png') }}" 
                 alt="Computer Pixel Art" 
                 class="computer-image">
            
            <!-- Interface sur l'écran (dialogs injectés ici) -->
            <div class="screen-interface"></div>
        </div>
    </section>
    
    <!-- Bouton Quitter -->
    <button class="quit-btn" id="quit-btn">QUITTER</button>
    
        <!-- Données du scénario pour JavaScript -->
        <script id="scenario-data" type="application/json">
    {{ scenario | tojson }}
        </script>
        <script>
            (function(){
                var el = document.getElementById('scenario-data');
                if (el) {
                    try {
                        window.scenarioData = JSON.parse(el.textContent || el.innerText || '{}');
                    } catch(e) {
                        window.scenarioData = {};
                        console.error('Failed to parse scenario data', e);
                    }
                } else {
                    window.scenarioData = {};
                }
            })();
            
            // Réinitialiser le compteur au premier scénario
            if (window.scenarioData && window.scenarioData.name === 'Clavier en détresse') {
                sessionStorage.setItem('scenarioCount', '0');
            }
        </script>
        
        <script src="{{ url_for('static', filename='js/dialog.js') }}"></script>
    <script src="{{ url_for('static', filename='js/scenario.js') }}"></script>
</body>
</html>
